# Описание
Репозиторий представляет из себя несколько MATLAB подпрограмм, рассчитывающих угол сектора противовеса, момент инерции маховика, максимальные и минимальные силы, действующие на коленчатый вал и проводит пост-обработку данных из ANSYS c расчётом коэффициента запаса. Ниже представлено описание этих программ (каждая сохранена в своей папке).

---
# sectorAngle
Подпрограмма определяет угол сектора противовеса. При необходимости увеличвает его радиус до выставленного предельного значения, в случае достижения которого увеличивается и толщина сектора.

# Порядок работы с подпрограммой
## Корректировка данных и компиляция
1) В sectorAngleDict.m изменяем данные для своего двигателя
- **Внутри** `% Geometry limits`
  **как минимум одно значение _должно_ быть больше первоначальных размеров сектора!**
- `pathToSave = 0` - сохранение в текущей папке результатов расчёта
- `pathToSave = '/HDD/termPaper/any/path'` - сохранение папки результатов в указанной директории
  2) В MATLAB запускаем "Main.m"
  3) Данные расчёта сохранятся в папке conrodForces.Results (либо в текущей папке, либо в заданной директории). Также для удобства проведения возможных последующих расчётов сохряняются и некоторые промежуточные данные.

## Пример отчёта
<pre><code>
Piston area, scuare metres
    0.0053

Radius of sector angle, millimetres
   87.0000

Thickness of the web, millimetres
   19.0900

/----------- Result -----------/

Crankshaft sector angle, ged
  148.7349

/------------------------------/

Contact me to feedback:
stanislau.stasheuski@gmail.com

© 2018 Stanislau Stasheuski

</code></pre>
---

# flywheel
Подпрограмма определяет момент инерции маховика

# Порядок работы с подпрограммой
## Индикаторная диаграмма
- Файл из папки проекта Diesel-RK <название>.ind, но с удалёнными в нём строками с описанием (*кроме шапки таблицы*)
- Текстовый файл имеющий формат .ind с любым названием *содержащий шапку таблицы* и два столбца - один с углами, другой с давлением в цилиндре

**Файл должен быть сохранён в папке проекта**
## Корректировка данных и компиляция
1) В flywheelDict.m изменяем данные на данные своего двигателя
2) В MATLAB запускаем "Main"
3) Данные расчёта сохранятся в папке flywheel.Results

## Результаты работы
### Силы действующие на поршень
![alt text](https://github.com/StasF1/READMEPictures/blob/master/flywheel/forcesInCombustor.png)

### Силы в цилиндро-поршневой группе
![alt text](https://github.com/StasF1/READMEPictures/blob/master/flywheel/forcesTZK.png)

### Мгновенный и средний крутящие моменты
![alt text](https://github.com/StasF1/READMEPictures/blob/master/flywheel/torqueMoment.png)

### Работа крутящего момента
![alt text](https://github.com/StasF1/READMEPictures/blob/master/flywheel/workOfMoment.png)
---
### Пример отчёта
<pre><code>
Mean value of angular velocity of the crankshaft, rad/s
  167.5516

Maximum of work A, J
  377.4728

Minimum of work A, J
   -7.8348

Overwork of torque moment, J
  385.3075

/----------------------------- Results -----------------------------/
 
Flywheel moment of inertia, kg*m^2
    0.1177

Ratio of flywheel moment of inertia to motor mass moment of inertia
J_flywheel/Jmm
    8.0050

/-------------------------------------------------------------------/
</code></pre>
---


# conrodForces
Подпрограмма определяет максимальную и минимальную силу К действующую на шатуны. Углы между ними и плоскостью симметрии колена вала при действии экстримальных нагрузок

### Блок-схема работы подпрограммы на примере расчёта колена вала на циклическую прочность (с определением коэффициента запаса в postProcessingANSYS)
![alt text](https://github.com/StasF1/READMEPictures/blob/master/conrodForces/conrodForcesToPostProcANSYS.png)
https://github.com/StasF1/postProcessingANSYS

# Порядок работы с подпрограммой
## Индикаторная диаграмма
- Файл из папки проекта Diesel-RK <название>.ind, но с удалёнными в нём строками с описанием (*кроме шапки таблицы*)
- Текстовый файл имеющий формат .ind с любым названием *содержащий шапку таблицы* и два столбца - один с углами, другой с давлением в цилиндре

**Файл должен быть сохранён в папке проекта**
## Корректировка данных и компиляция
1) В conrodForcesDict.m изменяем данные на данные своего двигателя (в случае рядного двигателя выставляем crankshaftAngle = 0 и combustionAngle = 0)
2) В MATLAB запускаем "Main"
3) Данные расчёта сохранятся в папке conrodForces.Results

## Результаты работы
### Силы в цилиндро-поршневой группе
![alt text](https://github.com/StasF1/READMEPictures/blob/master/conrodForces/forcesTZK.png)

Бирозовыми точками обозначается минимум и максимум действующих вдоль шатуна сил

### Варианты нагружения коленчатого вала при экремальных нагрузках
Максимальная нагрузка      |  Минимальная нагрузка
:-------------------------:|:-------------------------:
![alt text](https://github.com/StasF1/READMEPictures/blob/master/conrodForces/loadingModels-Max.png)  |  ![alt text](https://github.com/StasF1/READMEPictures/blob/master/conrodForces/loadingModels-Min.png)

---
### Пример отчёта
<pre><code>
Crank angle (alpha) when force K is maximum, deg

  366

Crank angle (alpha) when force K is minimum, deg

  12

Crank angle is zero (alpha = 0) at TDC

/--------------------- Results ----------------------/

Matrix of pushing conrod forces, N / 1e+05
    Maximum   Minimum
    1.0765   -0.0542
    0.0716    0.1242

Matrix of angles beetween conrods & crankshaft, deg
   Max   Min
    -8   -16
   130   125

"-" is anticlockwise direction,
"+" is clockwise direction

/----------------------------------------------------/
</code></pre>
---


# postProcessingANSYS
Подпрограмма определяет коэфицент запаса циклической прочности обрабатывая полученные в ANSYS распределения напряжений на детали

### Схема работы подпрограммы на примере расчёта колена вала на циклическую прочность (вместе с conrodForces)
![alt text](https://github.com/StasF1/READMEPictures/blob/master/conrodForces/conrodForcesToPostProcANSYS.png)
https://github.com/StasF1/conrodForces

# Порядок работы с подпрограммой
## Импортирование данных
Результаты расчёта должны быть сохранены в папке inputStressData/ **с сохранением их названия** (т.е. через замену)!

*Ничего удалять в уже сохраннённых файлах не нужно!*

## Корректировка данных и компиляция
1) В скрипте postProcDict.m меняем значения на свои. Указывается только площадь расчётного сечения или его диаметр. Другой параметр принимаеться за ноль.
2) В MATLAB запускаем "Main"
3) Данные расчёта (и данные для его проведения) сохранятся в папке ../postProcANSYS.Results/

---
## Пример отчёта
<pre><code>
Материал:
20ХН3А - http://metallicheckiy-portal.ru/marki_metallov/stk#3
Предел прочности, МПа:
        1370

Коэффициент упрочнения (beta_упр):
Обдувка дробью (с. 28)
    1.4000

Коэффициент учитывающий качество обработки поверхности (beta_1):
Шлифование (с. 29)
    0.8320

/----------------------- Результаты расчёта ----------------------/
 
Предел выносливости материала, МПа:
  565.8100

Константа материала, характеризующая его чувствительность к
напряжениям и масштабному фактору (nu_sigma):
    0.0133

Коэффициенты абсолютных размеров расчётного сечения - epsilon
(для нормальных и касательных напряжений соответственно):
    0.9748

    0.9627

Коэффициенты учитывающие размеры и технологические факторы - K
- эффективные коэффициенты концентрации напряжений
(для нормальных и касательных напряжений соответственно):
    0.8807

    1.3820

Коэффициенты влияния ассиметрии цикла - psi
(для нормальных и касательных напряжений соответственно):
    0.2940

    0.1470

 
Номер элемента с минимальным коэффицентом запаса:
       59168

Node ID для нагружения при максимальной нагрузке:
       69181

Node ID для нагружения при минимальной нагрузке:
       67814

Предел циклической прочности материала - sigma_-1, tau_-1
(для нормальных и касательных напряжений соответственно), МПа:
  565.8100

  339.4860

Тензоры напряжений для конечного элемена, в котором коэффициент
запаса минимален:
 
При максимальой нагрузке, МПа:
 -138.1200   -2.6858   41.9580
   -2.6858 -325.3700  184.7300
   41.9580  184.7300 -349.0500

При минимальной нагрузке, МПа:
   -6.8099   -1.1239    2.9686
   -1.1239  -15.3010    8.6039
    2.9686    8.6039  -18.8590

~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
 
Минимальный расчётный коэффициент запаса:
    1.6072
    
Коэффициент запаса для сравнения:
    1.6500
    
Погрешность cо сравниваемым коэффициентом запаса, %:
    2.5939
    
~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
 
/-----------------------------------------------------------------/
</code></pre>
---

